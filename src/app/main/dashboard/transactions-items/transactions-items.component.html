<div class="page-layout simple left-sidebar inner-sidebar inner-scroll" id="items-list-select-component">
    <mat-toolbar class="mat-accent m-0 items-data" matDialogTitle>
        <mat-toolbar-row fxLayout="row" fxLayoutAlign="space-between center">
            <span class="title dialog-title">Select Item ID</span>
            <button (click)="matDialogRef.close()" aria-label="Close dialog" mat-icon-button>
                <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar-row>
    </mat-toolbar>
    <div fxFlex="100" fxLayout="row">
        <div class="mt-20px" fxFlex="25">
            <div class="filter-title">Filter Items by Categories</div>
            <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
                <!-- This is the tree node template for leaf nodes -->
                <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                    <li class="mat-tree-node">
                        <!-- use a disabled button to provide padding for tree leaf -->
                        <button disabled mat-icon-button></button>
                        {{node.name}}
                        <button mat-icon-button title="Choose" (click)="itemsFilter(node)">
                            <mat-icon class="addBtn">check_circle</mat-icon>
                        </button>
                    </li>
                </mat-tree-node>
                <!-- This is the tree node template for expandable nodes -->
                <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                    <li>
                        <div class="mat-tree-node">
                            <button [attr.aria-label]="'toggle ' + node.name" mat-icon-button
                                    matTreeNodeToggle>
                                <mat-icon class="mat-icon-rtl-mirror">
                                    {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                </mat-icon>
                            </button>
                            {{node.name}}
                            <button mat-icon-button title="Choose" (click)="itemsFilter(node)">
                                <mat-icon class="addBtn">check_circle</mat-icon>
                            </button>
                        </div>
                        <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
                            <ng-container matTreeNodeOutlet></ng-container>
                        </ul>
                    </li>
                </mat-nested-tree-node>
            </mat-tree>
        </div>
        <div fxFlex="0.1" style="background-color: #777777; min-height: 400px!important;"></div>
        <div class="mt-20px pl-1rem" fxFlex="74.9">
            <div fxLayout="column" fxLayoutGap="20px">
                <div class="p-5px" fxFlex="1 0 auto" fxLayout="column">
                    <mat-form-field appearance="outline" fxFlex="100">
                        <mat-label>Search for Item Id or Item Name in the filtered category</mat-label>
                        <input class="search" matInput>
                    </mat-form-field>
                </div>
                <div class="p-5px">
                    <mat-table [@animateStagger]="{value:'50'}" [dataSource]="storeItems">
                        <ng-container matColumnDef="sno">
                            <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-sm>S.No</mat-header-cell>
                            <mat-cell *matCellDef="let item" fxHide fxShow.gt-sm>
                                <p class="email text-truncate">
                                    {{((pagination.page - 1) * pagination.perpage) + item.sno}}.
                                </p>
                            </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="id">
                            <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md>Item Id</mat-header-cell>
                            <mat-cell *matCellDef="let item" fxHide fxShow.gt-md>
                                <p class="phone text-truncate ml-3">
                                    {{item.id}}
                                </p>
                            </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="description">
                            <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md>Description</mat-header-cell>
                            <mat-cell *matCellDef="let item" fxHide fxShow.gt-md>
                                <p class="phone text-truncate">
                                    {{item.description}}
                                </p>
                            </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="unitPrice">
                            <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md>Unit Price</mat-header-cell>
                            <mat-cell *matCellDef="let item" fxHide fxShow.gt-md>
                                <p class="phone text-truncate">
                                    {{item.unitPrice}}
                                </p>
                            </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="category">
                            <mat-header-cell *matHeaderCellDef fxHide fxShow.gt-md>Category</mat-header-cell>
                            <mat-cell *matCellDef="let item" fxHide fxShow.gt-md>
                                <p class="phone text-truncate">
                                    {{item.categoryId}}
                                </p>
                            </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="actions">
                            <mat-header-cell *matHeaderCellDef>
                                <div fxFlex="row" fxLayoutAlign="end center" style="margin-right: 5px">Actions</div>
                            </mat-header-cell>
                            <mat-cell *matCellDef="let item">
                                <div fxFlex="row" fxLayoutAlign="end center">
                                    <button (click)="matDialogRef.close(item)" aria-label="Toggle star" mat-icon-button
                                            style="color: green">
                                        <mat-icon class="material-icons">check_circle</mat-icon>
                                    </button>
                                </div>
                            </mat-cell>
                        </ng-container>

                        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                        <mat-row *matRowDef="let item; columns: displayedColumns;" [@animate]="{value:'*',params:{y:'100%'}}"
                                 class="contact">
                        </mat-row>
                    </mat-table>
                </div>
                <div *ngIf="storeItems.length > 0" fxFlex="100">
                    <mat-paginator #paginator
                                   (page)="pageEvent = onPageChange($event)"
                                   [length]="pagination.total"
                                   [pageIndex]="pagination.page-1"
                                   [pageSize]="pagination.perpage"
                    >
                    </mat-paginator>
                </div>
            </div>
        </div>
    </div>
</div>